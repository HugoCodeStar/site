"use strict";(self.webpackChunkhugo_code_star_site=self.webpackChunkhugo_code_star_site||[]).push([[8994],{5680:(e,n,t)=>{t.d(n,{xA:()=>d,yg:()=>g});var s=t(6540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,s,a=function(e,n){if(null==e)return{};var t,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)t=r[s],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)t=r[s],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=s.createContext({}),u=function(e){var n=s.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=u(e.components);return s.createElement(l.Provider,{value:n},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return s.createElement(s.Fragment,{},n)}},m=s.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=u(t),m=a,g=c["".concat(l,".").concat(m)]||c[m]||p[m]||r;return t?s.createElement(g,i(i({ref:n},d),{},{components:t})):s.createElement(g,i({ref:n},d))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=m;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o[c]="string"==typeof e?e:a,i[1]=o;for(var u=2;u<r;u++)i[u]=t[u];return s.createElement.apply(null,i)}return s.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3670:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var s=t(8168),a=(t(6540),t(5680));const r={title:"NoSQL - Documents & Key-value",sidebar_label:"9 - Mongo & Redis",sidebar_position:9},i=void 0,o={unversionedId:"inf5111/Cours/cours9",id:"inf5111/Cours/cours9",isDocsHomePage:!1,title:"NoSQL - Documents & Key-value",description:"NoSQL - Les alternatives SQL",source:"@site/docs/inf5111/Cours/cours9.md",sourceDirName:"inf5111/Cours",slug:"/inf5111/Cours/cours9",permalink:"/site/docs/inf5111/Cours/cours9",editUrl:"https://github.com/HugoCodeStar/site/edit/master/docs/inf5111/Cours/cours9.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{title:"NoSQL - Documents & Key-value",sidebar_label:"9 - Mongo & Redis",sidebar_position:9},sidebar:"INF5111Sidebar",previous:{title:"8 - Visualisation",permalink:"/site/docs/inf5111/Cours/cours8"},next:{title:"10 - NoSQL, AI/ML, POO",permalink:"/site/docs/inf5111/Cours/cours10"}},l=[{value:"NoSQL - Les alternatives SQL",id:"nosql---les-alternatives-sql",children:[]},{value:"Familles de bases de donn\xe9es NoSQL",id:"familles-de-bases-de-donn\xe9es-nosql",children:[]},{value:"Document store et MongoDB",id:"document-store-et-mongodb",children:[{value:"Cas d&#39;utilisation typique",id:"cas-dutilisation-typique",children:[]},{value:"Mise en pratique",id:"mise-en-pratique",children:[]}]},{value:"Key-value stores et redis",id:"key-value-stores-et-redis",children:[{value:"Cas d&#39;utilisation typique",id:"cas-dutilisation-typique-1",children:[]},{value:"Mise en pratique",id:"mise-en-pratique-1",children:[]}]}],u={toc:l},d="wrapper";function c(e){let{components:n,...t}=e;return(0,a.yg)(d,(0,s.A)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h2",{id:"nosql---les-alternatives-sql"},"NoSQL - Les alternatives SQL"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Les bases de donn\xe9es relationnelles sont une technologie performante depuis vingt ans, offrant la persistance, le contr\xf4le de la concurrence et un m\xe9canisme d'int\xe9gration."),(0,a.yg)("li",{parentName:"ul"},"Les d\xe9veloppeurs d'applications ont \xe9t\xe9 frustr\xe9s par le d\xe9calage d'imp\xe9dance entre le mod\xe8le relationnel et les structures de donn\xe9es en m\xe9moire."),(0,a.yg)("li",{parentName:"ul"},"Il y a un mouvement qui s'\xe9loigne de l'utilisation des bases de donn\xe9es comme points d'int\xe9gration vers l'encapsulation des bases de donn\xe9es dans les applications et l'int\xe9gration via les services."),(0,a.yg)("li",{parentName:"ul"},"Le facteur essentiel pour un changement dans le stockage des donn\xe9es \xe9tait la n\xe9cessit\xe9 de prendre en charge de gros volumes de donn\xe9es en s'ex\xe9cutant sur des clusters. Les bases de donn\xe9es relationnelles ne sont pas con\xe7ues pour s'ex\xe9cuter efficacement sur des clusters."),(0,a.yg)("li",{parentName:"ul"},"NoSQL est un n\xe9ologisme accidentel. Il n'y a pas de d\xe9finition prescriptive - tout ce que vous pouvez faire est une observation des caract\xe9ristiques communes.",(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},"Ne pas utiliser le mod\xe8le relationnel"),(0,a.yg)("li",{parentName:"ul"},"Fonctionne bien sur les clusters"),(0,a.yg)("li",{parentName:"ul"},"Open source"),(0,a.yg)("li",{parentName:"ul"},"Sans sch\xe9ma"),(0,a.yg)("li",{parentName:"ul"},"Adapt\xe9 aux technologie webs")))),(0,a.yg)("h2",{id:"familles-de-bases-de-donn\xe9es-nosql"},"Familles de bases de donn\xe9es NoSQL"),(0,a.yg)("p",null,"Puisque le NoSQL est une familles de caract\xe9ristiques, plusieurs types de base de donn\xe9es tombe sous l'ombrelle du nom. Dans ce cours, nous regarderons 4 de ses types et leurs impl\xe9mentation les plus populaires :"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Document avec MongoDB"),(0,a.yg)("li",{parentName:"ul"},"Cl\xe9-valeur avec redis"),(0,a.yg)("li",{parentName:"ul"},"Colonne-famille avec Cassandra"),(0,a.yg)("li",{parentName:"ul"},"Graphe avec Neo4J")),(0,a.yg)("p",null,"Pour chaque famille, nous \xe9tudierons les avantages et la formulation de base des requ\xeates."),(0,a.yg)("h2",{id:"document-store-et-mongodb"},"Document store et MongoDB"),(0,a.yg)("p",null,"Les documents sont le concept principal des bases de donn\xe9es documentaires. La base de donn\xe9es stocke et r\xe9cup\xe8re des documents, qui peuvent \xeatre XML, JSON, BSON, etc. Ces documents sont des structures de donn\xe9es arborescentes hi\xe9rarchiques auto-descriptives qui peuvent \xeatre constitu\xe9es de dictionnaires/map, de collections et de valeurs scalaires. Les documents stock\xe9s sont similaires les uns aux autres mais ne doivent pas n\xe9cessairement \xeatre exactement les m\xeames. Les bases de donn\xe9es de documents stockent les documents dans la partie valeur du magasin cl\xe9-valeur\xa0; consid\xe9rez les bases de donn\xe9es de documents comme des magasins cl\xe9-valeur o\xf9 la valeur est examinable. Voyons comment la terminologie se compare dans Oracle et MongoDB"),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Oracle"),(0,a.yg)("th",{parentName:"tr",align:null},"Mongo"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"schema"),(0,a.yg)("td",{parentName:"tr",align:null},"database")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"table"),(0,a.yg)("td",{parentName:"tr",align:null},"collection")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"row"),(0,a.yg)("td",{parentName:"tr",align:null},"document")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"join"),(0,a.yg)("td",{parentName:"tr",align:null},"DBRef")))),(0,a.yg)("p",null,"La coh\xe9rence dans la base de donn\xe9es MongoDB est configur\xe9e en utilisant les \"replica sets\" et en choisissant d'attendre que les \xe9critures soient r\xe9pliqu\xe9es sur tous les esclaves ou sur un nombre donn\xe9 d'esclaves. Chaque \xe9criture peut sp\xe9cifier le nombre de serveurs sur lesquels l'\xe9criture doit \xeatre propag\xe9e avant de revenir comme r\xe9ussie."),(0,a.yg)("p",null,"Les transactions, au sens traditionnel du SGBDR, signifient que vous pouvez commencer \xe0 modifier la base de donn\xe9es avec des commandes d'insertion, de mise \xe0 jour ou de suppression sur diff\xe9rentes tables, puis d\xe9cider si vous souhaitez conserver les modifications ou non en utilisant la validation ou la restauration. Ces constructions ne sont g\xe9n\xe9ralement pas disponibles dans les solutions NoSQL : une \xe9criture r\xe9ussit ou \xe9chou\xe9. Les transactions au niveau du document unique sont appel\xe9es transactions atomiques. Les transactions impliquant plus d'une op\xe9ration ne sont pas possibles."),(0,a.yg)("h3",{id:"cas-dutilisation-typique"},"Cas d'utilisation typique"),(0,a.yg)("h4",{id:"journalisation-des-\xe9v\xe9nements"},"Journalisation des \xe9v\xe9nements"),(0,a.yg)("p",null,"Les applications ont des besoins diff\xe9rents en mati\xe8re de journalisation des \xe9v\xe9nements\xa0; au sein de l'entreprise, de nombreuses applications diff\xe9rentes souhaitent enregistrer des \xe9v\xe9nements. Les bases de donn\xe9es de documents peuvent stocker tous ces diff\xe9rents types d'\xe9v\xe9nements et peuvent agir comme un magasin de donn\xe9es central pour le stockage des \xe9v\xe9nements. Cela est particuli\xe8rement vrai lorsque le type de donn\xe9es captur\xe9es par les \xe9v\xe9nements ne cesse de changer. Les \xe9v\xe9nements peuvent \xeatre divis\xe9s par le nom de l'application d'o\xf9 provient l'\xe9v\xe9nement ou par le type d'\xe9v\xe9nement tel que order_processed ou customer_logged."),(0,a.yg)("h4",{id:"syst\xe8mes-de-gestion-de-contenu-plateformes-de-blogs"},"Syst\xe8mes de gestion de contenu, Plateformes de blogs"),(0,a.yg)("p",null,"\xc9tant donn\xe9 que les bases de donn\xe9es de documents n'ont pas de sch\xe9mas pr\xe9d\xe9finis et comprennent g\xe9n\xe9ralement les documents JSON, elles fonctionnent bien dans les syst\xe8mes de gestion de contenu ou les applications pour la publication de sites Web, la gestion des commentaires des utilisateurs, les enregistrements des utilisateurs, les profils et les documents Web."),(0,a.yg)("h4",{id:"analyse-web-ou-analyse-en-temps-r\xe9el"},"Analyse Web ou Analyse en temps r\xe9el"),(0,a.yg)("p",null,"Les bases de donn\xe9es de documents peuvent stocker des donn\xe9es pour des analyses en temps r\xe9el; \xe9tant donn\xe9 que certaines parties du document peuvent \xeatre mises \xe0 jour, il est tr\xe8s facile de stocker des pages vues ou des visiteurs uniques, et de nouvelles mesures peuvent \xeatre facilement ajout\xe9es sans modification de sch\xe9ma."),(0,a.yg)("h4",{id:"applications-de-commerce-\xe9lectronique"},"Applications de commerce \xe9lectronique"),(0,a.yg)("p",null,"Les applications de commerce \xe9lectronique ont souvent besoin d'avoir un sch\xe9ma flexible pour les produits et les commandes, ainsi que la possibilit\xe9 de faire \xe9voluer leurs mod\xe8les de donn\xe9es sans refactorisation co\xfbteuse de la base de donn\xe9es ou migration des donn\xe9es."),(0,a.yg)("h3",{id:"mise-en-pratique"},"Mise en pratique"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://www.mongodb.com/docs/manual/crud/"},"https://www.mongodb.com/docs/manual/crud/")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://www.mongodb.com/docs/manual/aggregation/"},"https://www.mongodb.com/docs/manual/aggregation/")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://www.mongodb.com/docs/guides/"},"https://www.mongodb.com/docs/guides/"))),(0,a.yg)("h2",{id:"key-value-stores-et-redis"},"Key-value stores et redis"),(0,a.yg)("p",null,"Un magasin cl\xe9-valeur est une simple table de hachage, principalement utilis\xe9e lorsque tous les acc\xe8s \xe0 la base de donn\xe9es se font via une cl\xe9 primaire. Pensez \xe0 une table dans un SGBDR traditionnel avec deux colonnes, telles que ID et NAME, la colonne ID \xe9tant la cl\xe9 et la colonne NAME stockant la valeur. Dans un SGBDR, la colonne NAME est limit\xe9e au stockage de donn\xe9es de type String. L'application peut fournir un ID et une VALEUR et conserver la paire; si l'ID existe d\xe9j\xe0, la valeur actuelle est \xe9cras\xe9e, sinon une nouvelle entr\xe9e est cr\xe9\xe9e."),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Oracle"),(0,a.yg)("th",{parentName:"tr",align:null},"redis"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"row"),(0,a.yg)("td",{parentName:"tr",align:null},"key-value")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"rowid"),(0,a.yg)("td",{parentName:"tr",align:null},"key")))),(0,a.yg)("p",null,"La coh\xe9rence ne s'applique qu'aux op\xe9rations sur une seule cl\xe9, car ces op\xe9rations sont soit un GET, soit un PUT, soit un DELETE sur une seule cl\xe9. Des \xe9critures optimistes peuvent \xeatre effectu\xe9es, mais sont tr\xe8s co\xfbteuses \xe0 mettre en \u0153uvre, car un changement de valeur ne peut pas \xeatre d\xe9termin\xe9 par le magasin de donn\xe9es."),(0,a.yg)("p",null,"Tous les magasins cl\xe9-valeur peuvent interroger par cl\xe9, et c'est \xe0 peu pr\xe8s tout. Si vous devez interroger en utilisant un attribut de la colonne de valeur, il n'est pas possible d'utiliser la base de donn\xe9es\xa0: votre application doit lire la valeur pour d\xe9terminer si l'attribut remplit les conditions."),(0,a.yg)("p",null,"Lors de l'utilisation de magasins cl\xe9-valeur, il faut beaucoup r\xe9fl\xe9chir \xe0 la conception de la cl\xe9. La cl\xe9 peut-elle \xeatre g\xe9n\xe9r\xe9e \xe0 l'aide d'un algorithme\xa0? La cl\xe9 peut-elle \xeatre fournie par l'utilisateur (ID utilisateur, e-mail, etc.)\xa0? Ou d\xe9riv\xe9 d'horodatages ou d'autres donn\xe9es pouvant \xeatre d\xe9riv\xe9es en dehors de la base de donn\xe9es\xa0?"),(0,a.yg)("h3",{id:"cas-dutilisation-typique-1"},"Cas d'utilisation typique"),(0,a.yg)("h4",{id:"stockage-des-informations-de-session"},"Stockage des informations de session"),(0,a.yg)("p",null,"G\xe9n\xe9ralement, chaque session Web est unique et se voit attribuer une valeur sessionid unique. Les applications qui stockent l'ID de session sur disque ou dans un SGBDR b\xe9n\xe9ficieront grandement du passage \xe0 un magasin cl\xe9-valeur, car tout ce qui concerne la session peut \xeatre stock\xe9 par une seule requ\xeate PUT ou r\xe9cup\xe9r\xe9 \xe0 l'aide de GET. Cette op\xe9ration de requ\xeate unique la rend tr\xe8s rapide, car tout ce qui concerne la session est stock\xe9 dans un seul objet. "),(0,a.yg)("h4",{id:"profils-utilisateur-pr\xe9f\xe9rences"},"Profils utilisateur, Pr\xe9f\xe9rences"),(0,a.yg)("p",null,"Presque chaque utilisateur a un ID utilisateur, un nom d'utilisateur ou un autre attribut unique, ainsi que des pr\xe9f\xe9rences telles que la langue, la couleur, le fuseau horaire, les produits auxquels l'utilisateur a acc\xe8s, etc. Tout cela peut \xeatre mis dans un objet, donc obtenir les pr\xe9f\xe9rences d'un utilisateur prend une seule op\xe9ration GET. De m\xeame, les profils de produits peuvent \xeatre stock\xe9s."),(0,a.yg)("h4",{id:"donn\xe9es-du-panier"},"Donn\xe9es du panier"),(0,a.yg)("p",null,"Les sites Web de commerce \xe9lectronique ont des paniers d'achat li\xe9s \xe0 l'utilisateur. Comme nous voulons que les paniers d'achat soient disponibles \xe0 tout moment, sur tous les navigateurs, machines et sessions, toutes les informations d'achat peuvent \xeatre mises dans la valeur o\xf9 la cl\xe9 est le ",(0,a.yg)("inlineCode",{parentName:"p"},"userid"),"."),(0,a.yg)("h3",{id:"mise-en-pratique-1"},"Mise en pratique"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://www.tutorialspoint.com/redis/redis_commands.htm"},"https://www.tutorialspoint.com/redis/redis_commands.htm")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://redis.io/docs/data-types/tutorial/"},"https://redis.io/docs/data-types/tutorial/"))))}c.isMDXComponent=!0}}]);